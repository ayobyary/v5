<div class="h-full flex flex-col">
  <!-- Form View -->
  <div *ngIf="!showInfo" class="flex-1 overflow-y-auto">
    <form [formGroup]="bodyForm" (ngSubmit)="onSubmit()" class="p-2">
      <!-- تب‌ها -->
      <div class="flex border-b mb-2">
        <button type="button" 
          [class.border-pink-500]="activeTab === 'analysis'"
          [class.text-pink-500]="activeTab === 'analysis'"
          (click)="activeTab = 'analysis'"
          class="px-3 py-1 text-sm border-b-2 border-transparent hover:text-pink-500">
          تحلیل ساختار
        </button>
        <button type="button"
          [class.border-pink-500]="activeTab === 'measurements'"
          [class.text-pink-500]="activeTab === 'measurements'"
          (click)="activeTab = 'measurements'"
          class="px-3 py-1 text-sm border-b-2 border-transparent hover:text-pink-500">
          اندازه‌ها
        </button>
        <button type="button"
          [class.border-pink-500]="activeTab === 'proportions'"
          [class.text-pink-500]="activeTab === 'proportions'"
          (click)="activeTab = 'proportions'"
          class="px-3 py-1 text-sm border-b-2 border-transparent hover:text-pink-500">
          تناسبات
        </button>
      </div>

      <!-- محتوای تب‌ها -->
      <div class="bg-white rounded shadow-sm p-1">
        <!-- تحلیل ساختار -->
        <div *ngIf="activeTab === 'analysis'" class="grid grid-cols-2 gap-1">
          <div class="form-group">
            <label class="block text-xs mb-0.5">نوع ساختار</label>
            <select formControlName="structureType" class="w-full p-0.5 border rounded text-xs">
              <option value="ectomorph">اکتومورف</option>
              <option value="mesomorph">مزومورف</option>
              <option value="endomorph">اندومورف</option>
            </select>
          </div>
          <div class="form-group">
            <label class="block text-xs mb-0.5">نوع استخوان‌بندی</label>
            <select formControlName="boneStructure" class="w-full p-0.5 border rounded text-xs">
              <option value="small">کوچک</option>
              <option value="medium">متوسط</option>
              <option value="large">بزرگ</option>
            </select>
          </div>
        </div>

        <!-- اندازه‌ها -->
        <div *ngIf="activeTab === 'measurements'" class="grid grid-cols-3 gap-1">
          <div class="form-group">
            <label class="block text-xs mb-0.5">قد (سانتی‌متر)</label>
            <input type="number" formControlName="height" class="w-full p-0.5 border rounded text-xs">
          </div>
          <div class="form-group">
            <label class="block text-xs mb-0.5">وزن (کیلوگرم)</label>
            <input type="number" formControlName="weight" class="w-full p-0.5 border rounded text-xs">
          </div>
          <div class="form-group">
            <label class="block text-xs mb-0.5">دور سینه (سانتی‌متر)</label>
            <input type="number" formControlName="chest" class="w-full p-0.5 border rounded text-xs">
          </div>
          <div class="form-group">
            <label class="block text-xs mb-0.5">دور کمر (سانتی‌متر)</label>
            <input type="number" formControlName="waist" class="w-full p-0.5 border rounded text-xs">
          </div>
          <div class="form-group">
            <label class="block text-xs mb-0.5">دور باسن (سانتی‌متر)</label>
            <input type="number" formControlName="hips" class="w-full p-0.5 border rounded text-xs">
          </div>
          <div class="form-group">
            <label class="block text-xs mb-0.5">دور بازو (سانتی‌متر)</label>
            <input type="number" formControlName="biceps" class="w-full p-0.5 border rounded text-xs">
          </div>
        </div>

        <!-- تناسبات -->
        <div *ngIf="activeTab === 'proportions'" class="grid grid-cols-3 gap-1">
          <div class="form-group">
            <label class="block text-xs mb-0.5">نسبت کمر به باسن</label>
            <input type="number" formControlName="waistHipRatio" class="w-full p-0.5 border rounded text-xs">
          </div>
          <div class="form-group">
            <label class="block text-xs mb-0.5">نسبت قد به وزن</label>
            <input type="number" formControlName="heightWeightRatio" class="w-full p-0.5 border rounded text-xs">
          </div>
        </div>
      </div>

      <!-- دکمه‌های عملیات -->
      <div class="flex justify-end gap-1 mt-1">
        <button type="button" (click)="showInfo = true" class="px-2 py-0.5 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-xs">
          مشاهده اطلاعات
        </button>
        <button type="submit" class="px-2 py-0.5 bg-pink-500 text-white rounded hover:bg-pink-600 text-xs">
          ذخیره تغییرات
        </button>
      </div>
    </form>
  </div>

  <!-- Info View -->
  <div *ngIf="showInfo" class="flex-1 overflow-y-auto">
    <div class="p-2">
      <!-- تب‌ها -->
      <div class="flex border-b mb-2">
        <button type="button" 
          [class.border-pink-500]="activeTab === 'analysis'"
          [class.text-pink-500]="activeTab === 'analysis'"
          (click)="activeTab = 'analysis'"
          class="px-3 py-1 text-sm border-b-2 border-transparent hover:text-pink-500">
          تحلیل ساختار
        </button>
        <button type="button"
          [class.border-pink-500]="activeTab === 'measurements'"
          [class.text-pink-500]="activeTab === 'measurements'"
          (click)="activeTab = 'measurements'"
          class="px-3 py-1 text-sm border-b-2 border-transparent hover:text-pink-500">
          اندازه‌ها
        </button>
        <button type="button"
          [class.border-pink-500]="activeTab === 'proportions'"
          [class.text-pink-500]="activeTab === 'proportions'"
          (click)="activeTab = 'proportions'"
          class="px-3 py-1 text-sm border-b-2 border-transparent hover:text-pink-500">
          تناسبات
        </button>
      </div>

      <!-- محتوای تب‌ها -->
      <div class="bg-white rounded shadow-sm p-1">
        <!-- تحلیل ساختار -->
        <div *ngIf="activeTab === 'analysis'" class="grid grid-cols-2 gap-1">
          <div>
            <p class="text-xs text-gray-600 mb-0.5">نوع ساختار:</p>
            <p class="text-xs font-medium">{{bodyAnalysis.structureType}}</p>
          </div>
          <div>
            <p class="text-xs text-gray-600 mb-0.5">نوع استخوان‌بندی:</p>
            <p class="text-xs font-medium">{{bodyAnalysis.boneStructure}}</p>
          </div>
        </div>

        <!-- اندازه‌ها -->
        <div *ngIf="activeTab === 'measurements'" class="grid grid-cols-3 gap-1">
          <div>
            <p class="text-xs text-gray-600 mb-0.5">قد:</p>
            <p class="text-xs font-medium">{{bodyMeasurements.height}} سانتی‌متر</p>
          </div>
          <div>
            <p class="text-xs text-gray-600 mb-0.5">وزن:</p>
            <p class="text-xs font-medium">{{bodyMeasurements.weight}} کیلوگرم</p>
          </div>
          <div>
            <p class="text-xs text-gray-600 mb-0.5">دور سینه:</p>
            <p class="text-xs font-medium">{{bodyMeasurements.chest}} سانتی‌متر</p>
          </div>
          <div>
            <p class="text-xs text-gray-600 mb-0.5">دور کمر:</p>
            <p class="text-xs font-medium">{{bodyMeasurements.waist}} سانتی‌متر</p>
          </div>
          <div>
            <p class="text-xs text-gray-600 mb-0.5">دور باسن:</p>
            <p class="text-xs font-medium">{{bodyMeasurements.hips}} سانتی‌متر</p>
          </div>
          <div>
            <p class="text-xs text-gray-600 mb-0.5">دور بازو:</p>
            <p class="text-xs font-medium">{{bodyMeasurements.biceps}} سانتی‌متر</p>
          </div>
        </div>

        <!-- تناسبات -->
        <div *ngIf="activeTab === 'proportions'" class="grid grid-cols-3 gap-1">
          <div>
            <p class="text-xs text-gray-600 mb-0.5">نسبت کمر به باسن:</p>
            <p class="text-xs font-medium">{{bodyProportions[0]?.value}}</p>
          </div>
          <div>
            <p class="text-xs text-gray-600 mb-0.5">نسبت قد به وزن:</p>
            <p class="text-xs font-medium">{{bodyProportions[1]?.value}}</p>
          </div>
        </div>
      </div>

      <!-- دکمه بازگشت -->
      <div class="flex justify-end mt-1">
        <button (click)="showInfo = false" class="px-2 py-0.5 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-xs">
          بازگشت به ویرایش
        </button>
      </div>
    </div>
  </div>
</div>
